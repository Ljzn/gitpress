# 虚拟机不虚

虚拟机和编译器最大的区别是一个在运行时，一个在编译时。但也有人说他俩区别不大，有很多重和的地方。这不是重点。

虚拟机的对立面就是物理机了，小时候家里买不起游戏机，我到新华书店花了15块钱买了一个马里奥游戏光盘。这绝对是我这辈子花得最值的15块钱，光盘里有FC，GBA，N64等等几款模拟器，加上几十款马力奥游戏。而且N64模拟器还支持自定义键盘和多人分屏游戏，键盘安排好，4个人同时玩一点问题没有。

模拟器是一种虚拟机，在PC上模拟出来一个虚拟的游戏级硬件，使得ROM文件可以被执行。

在程序员之间最著名的虚拟机应该就是JVM了，一次编写，到处运行的口号深入人心。Chrome 的 V8 一般被成为 JavaScript 引擎，但在功能上和 JVM 很类似，也可以被归为是一种虚拟机。

也许是从以太坊开始，区块链领域也开始流行虚拟机的概念。智能合约的代码不可以直接操作节点的硬件资源，而是例如 “Gas” 这样的虚拟资源。所以说是虚拟机也算是非常合理了. 事实上, 早在比特币设计之初, 就已经具有了虚拟机的的重要组成部分 ---- OP_Codes. 高级语言可以被编译到 OP_Codes 然后以交易的形式发送到比特币网络中执行. 有人可能会说, 比特币的 OP_Codes 不可以循环, 无法实现复杂的功能. 这一点就错了, 使用 `OP_CHECKSIG` 系列操作符, 是可以在锁定脚本(lock script)里去限制下一笔交易的完整内容的, 因为签名是需要由完整的交易的摘要产生的.

## 文件存储

为什么突然扯到文件存储呢, 因为代码是文件, 数据是文件, 账本也是文件. 文件存储也是区块链领域挺火的一个应用. 纯存储真不是区块链的优势, 亚马逊 S3 可以处理得很好, 价格便宜, 怕丢就多备份. 区块链主要就是给文件加上时间戳, 打个不可篡改的印子, 完事了矿工就可以把文件删除了, 没有必要一直保存着. 存储的事情, 会有各种长尾的公司去做.

Filecoin 路子就歪了. 首先在 Filecoin 上存文件不可能比 S3 便宜, (但是在ICO 的钱烧完之前可能可以通过补贴矿工来做到很便宜) 因为复杂的挖矿机制要求同一份数据在硬盘上有多份完整拷贝, 而且需要通过网络经常去确认文件的存在. 不过对于自己不理解的事情还是少说两句好了, 我真的看不太懂 Filecoin 的运作方式.

这个世界上我不理解的事情有很多, 大多数是由于我太愚钝, 比如数论, 我很难理解数学家们作出的各种各样的猜想究竟有什么用.

## 智能合约

最近看到一个说法: 匿名币不能实现智能合约.